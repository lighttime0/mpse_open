# mpse 开发时间点纪要



###2019.02.25 - 2019.03.01

根据上学期初次会议的讨论，完成Cloud9与Klee的对比实验，确定初期将Cloud9移植到Klee-1.4上的方案



### 2019.03.04 - 2019.03.15

移植Cloud9，这两周的移植工作下来，感觉之前预期的需要一个月的时间还是比较准的。



## 2019.03.18 - 2019.03.29

Cloud9第一轮移植代码大部分完成了，开始修改CMakeLists.txt。



目前对Cloud9有一个比较整体的把握了。Cloud9对Klee的代码修改主要目标有两个：

（1）支持分布式符号执行；

（2）支持多线程、多进程。



Cloud9的修改主要有三部分：

（1）代码的Redistribution。目的是开发分布式符号执行，分布式符号执行中，需要每台机器维护一个独立的符号执行流程，同时还要彼此通信，所以需要将一些代码重新分布，让分布式的代码可以方便地掉用。

（2）代码的增加。目的是增加分布式、多进程、多线程的功能。分布式的代码我们不关心，多进程、多线程的代码大致的思路是：

* 增加对fork、pthread_xxx等函数的建模；增加pipe、event等机制的建模；
* 在符号执行的过程中，对每个线程的相关信息记录到ExecutionState中，继承之前的约束后，对每个线程单独记录约束条件，并求解。


移植的整体思路是：

（1）以Klee-1.4为base，接口有冲突的时候尽量以Klee-1.4的代码为基准。Cloud9对代码的Redistribution也尽量去掉，以Klee-1.4的distirbution为基准。

（2）分布式符号执行部分的代码尽量剔除掉，减少潜在的bug。

（3）runtime/POSIX中和多线程支持无关的，且比较复杂的代码，暂时不动。这部分代码Cloud9改的面目全非了，移植的话耗时较多，但是增加的功能也就只有socket和pipe的支持，所以目前先不动这块的代码，直接用Klee-1.4的代码。